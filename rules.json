{
    "rules": [
        {
            "name": "Set parents",
            "props": [
                {
                    "parents": [
                        "create-array",
                        ["get", "venueType"],
                        ["get", "sector"],
                        ["get", "parent1"],
                        ["get", "parent2"]
                    ]
                },
                { "parent1": ["undefined"], "parent2": ["undefined"] }
            ]
        },
        {
            "name": "Rename iconURL to iconUrl",
            "props": [{ "iconUrl": ["get", "iconURL"] }, { "iconURL": ["undefined"] }]
        },
        {
            "name": "Rename logoURL to logoUrl",
            "props": [{ "logoUrl": ["get", "logoURL"] }, { "logoURL": ["undefined"] }]
        },
        {
            "name": "Set icons from venueType/sector",
            "filter": ["all", ["!", ["get", "iconUrl"]], ["get", "venueType"], ["get", "sector"]],
            "props": [
                {
                    "iconUrlBase": [
                        "concat",
                        "https://fest-digitalx.expofp.com/images/new/",
                        ["get", "venueType"],
                        "-",
                        ["get", "sector"]
                    ]
                },
                {
                    "iconUrlActive": ["concat", ["get", "iconUrlBase"], "-active.png"],
                    "iconUrl": ["concat", ["get", "iconUrlBase"], ".png"]
                },
                {
                    "iconUrlBase": ["undefined"]
                }
            ]
        },
        {
            "name": "Set default iconUrl for all entities",
            "filter": ["!", ["get", "iconUrl"]],
            "props": {
                "iconUrl": "https://fest-digitalx.expofp.com/images/icon-23.png"
            }
        },
        {
            "name": "Set name from id",
            "filter": ["!", ["get", "name"]],
            "props": { "name": ["get", "id"] }
        },
        {
            "name": "Set entityName",
            "filter": ["!", ["get", "entityName"]],
            "props": { "entityName": ["get", "name"] }
        },
        {
            "name": "Set buttons",
            "props": {
                "showMoreDetailsButton": true,
                "showDirectionsButton": true
            }
        },
        {
            "name": "Remove entities that are marked as not added to mapbox",
            "filter": ["==", ["get", "addedToMapbox"], "FALSE"],
            "delete": true
        },
        {
            "name": "TO DELETE LATER: Just force existing iconUrl for all entities",
            "filter": ["!", ["get", "iconUrl"]],
            "props": {
                "iconUrlFallback": "https://fest-digitalx.expofp.com/images/icon-23.png"
            }
        }
    ]
}
